# Операционная система
**Операционная система** состоит из:
1. [[Inter process communication]] IPC средство межпроцессного взаимодействия
2. [[File system]]
3. [[Sheduler]] - планировщик
4. [[Synchronization]] - синхронизация [[Процессы]] и [[Потоки]]
5. [[Memory allocators]]
6. [[Interrupts]] - прерывания
7. [[Язык ассемблера]]

# Физическая и логическая память
Физическая - память компьютера, логическая - память приложения, приложению не нужно знать об устройстве памяти компьютера поэтому мы его так ограничиваем.

## Сегментная адресация
У нас есть таблица дескрипторов сегментов, когда создается новый процесс, ОС присваивает ему определенный дескриптор. Зная это, ОС может преобразовать логический адрес в физический.
![[../Files/Pasted image 20220504132355.png]]

Как происходит преобразование? ОС проверяет, что мы не вышли за границы нашего пространства, отступает на Base, это будет начало нашего пространства.

## Страничная адресация

Способ организации виртуальной памяти, при котором виртуальные адреса отображаются на физические постранично (обычно 1 страница = 4 КB).

Память процесса может лежать в физической памяти в любом порядке:

![[adrr.excalidraw]]

Адресация реализуется через _PageTables_.

Если у нас страницы имеют размер 4 КБ, а физической памяти всего 4 ГБ, то мы можем создать 1 миллион страниц, то есть у нас будет массив из миллиона элементов. Вместо массива на много элементов мы храним массив (_каталог страниц_) размера 1024 из указателей на массивы размерами по 1024 (_таблицы страниц_). Почему это удобнее? Некоторые указатели на таблицы можно не хранить, если память не используется.

Это выглядит как-то так:
![](02.15_page_table.png)
![](02.15_page_tables.png)

Значение регистра CR3 для каждой программы свой, т.к. у них разные адресные пространства. Для ускорения трансляции виртуального в физический применяется специальный кеш TLB (Translation lookaside buffer). Так же, как и обычный, может быть нескольких уровней.