# Конструктор перемещения и перемещающий оператор присваивания
В следующих случаях вызывается конструктор перемещения (move constructor):

![[../Files/Pasted image 20220218114347.png]]

В следующих случаях вызывается оператор перемещающего присваивания (move assignment operator):

![[../Files/Pasted image 20220218114438.png]]

Если у вас есть собственный класс с конструктором копирования, но без конструктора перемещения, то компилятор делает перемещение эквивалентным копированию.

```cpp
template<typename T> 
SimpleVector<T>::SimpleVector(SimpleVector<T>&& other) 
	
{ 
	swap(*this, other);
} 
// 0 1
```

```cpp
template<typename T>
void SimpleVector<T>::operator=(SimpleVector<T>&& other) 
{ 
	swap(*this, other);
	return *this; 
}
```

**Правило 5** - если вы определили один из следующих методов, то должны определить их все, поскольку раз вы их определили нетривиальный метод, то у вас есть ресурс который должен копироваться, перемещаться и освобождаться:
1. Деструктор
2. Конструктор копирования
3. Оператор присваивания
4. Перемещающий конструктор
5. Оператор перемещающего присваивания

**Правило 0** - проектируйте свои классы так, чтобы не пришлось эти 5 методов определять. Для этого нужно
1. Самостоятельно не выделять память в куче
2. Использовать библиотеку STL