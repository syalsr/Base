# Протокол DHCP
Dynamic host configuration protocol - протокол динамической конфигурации хостов. Для работы в сети, компьютеру нужен IP-адрес, его можно назначить вручную, либо автоматически с помощью DHCP, но адреса могут меняться.

Для работы DHCP нужен сервер - компьютер который обеспечивает назначение IP-адресов и ведет таблицу назначенных адресов, чтобы избежать дублирования.

Как происходит получение?
1. Клиент посылает сообщение DISCOVER по широковещательному адресу FF:FF:FF:FF:FF:FF
2. Сервер DHCP откликается и посылает ему IP-адрес который он может использовать
3. Клиент посылает ему этот же самый адрес в знак подтверждения
4. И сервер посылает подтверждение

![[../Files/Pasted image 20220620175352.png]]

| Сообщение DHCP | Назначение                                                   |
| -------------- | ------------------------------------------------------------ |
| DISCOVER       | Поиск DHCP сервера                                           |
| OFFER          | Предложение IP-адреса DHCP сервером клиенту                  |
| REQUEST        | Запрос IP-адреса DHCP клиентом                               |
| ACK            | Подтверждение назначения IP-адреса DHCP клиенту              |
| NACK           | Запрет использования запрошенного DHCP клиентом IP-адреса    |
| RELEASE        | Освобождение IP-адреса                                       |
| INFORM         | Запрос и передача дополнительной конфигурационной информации |

# Назначение адресов в DHCP
1. Фиксированный - Выделенный IP-адрес для каждого MAC-адреса 
2. Динамический - Выделение компьютеру любого IP-адреса из пула адресов 
3. Пул адресов - Список (диапазон) IP-адресов, которые назначает DHCP сервер. DHCP сервер следит за уникальностью распределения адресов

IP-адрес выделяется DHCP клиенту на ограниченное время. Типичное время: 1 час, 1 сутки, 3 суток и т.п. После окончания времени аренды IP-адрес освобождается DHCP клиент может продлить использование IPадреса с помощью сообщения REQUEST

![[../Files/Pasted image 20220620180003.png]]

При прекращении использовании адреса отправляется сообщение RELEASE, для освобождении адреса. Сообщение DHCP Release автоматически отправляется современными ОС при корректном выключении.